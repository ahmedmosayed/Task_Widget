<?php

echo "\n";
echo "========================================\n";
echo "Task Widget - Full Testing Guide\n";
echo "========================================\n\n";

echo "STEP 1: Make sure Laravel server is running\n";
echo "Command: php artisan serve\n";
echo "Or: php artisan serve --port=8000\n\n";

echo "========================================\n";
echo "STEP 2: Create a Test Account\n";
echo "========================================\n";
echo "URL: http://localhost:8000/register\n";
echo "Fill in:\n";
echo "  - Name: Test User\n";
echo "  - Email: test@example.com\n";
echo "  - Password: password123\n";
echo "  - Confirm Password: password123\n";
echo "Click: Register\n\n";

echo "========================================\n";
echo "STEP 3: Go to Dashboard\n";
echo "========================================\n";
echo "After registration, you will be redirected to dashboard\n";
echo "OR visit: http://localhost:8000/dashboard\n\n";

echo "========================================\n";
echo "STEP 4: Test My Tasks Widget\n";
echo "========================================\n\n";

echo "TEST 4.1: Load Tasks\n";
echo "Expected: The page loads and shows 'Loading tasks...'\n";
echo "          Then shows 'No tasks yet. Create your first one!'\n\n";

echo "TEST 4.2: Add a Task\n";
echo "Steps:\n";
echo "  1. Type: 'Buy milk'\n";
echo "  2. Click: Add button (or press Enter)\n";
echo "Expected: Task appears in the list without page reload\n";
echo "         Input field clears automatically\n\n";

echo "TEST 4.3: Add Another Task\n";
echo "Steps:\n";
echo "  1. Type: 'Buy bread'\n";
echo "  2. Click: Add button\n";
echo "Expected: New task appears at the top\n\n";

echo "TEST 4.4: Toggle Task Completion\n";
echo "Steps:\n";
echo "  1. Click the checkbox next to 'Buy milk'\n";
echo "Expected: \n";
echo "  - Checkbox gets checked\n";
echo "  - Text becomes gray\n";
echo "  - Line-through appears on text\n\n";

echo "TEST 4.5: Toggle Again\n";
echo "Steps:\n";
echo "  1. Click the checkbox again\n";
echo "Expected: \n";
echo "  - Checkbox gets unchecked\n";
echo "  - Text becomes normal (black)\n";
echo "  - Line-through disappears\n\n";

echo "TEST 4.6: Delete a Task\n";
echo "Steps:\n";
echo "  1. Hover over a task (you'll see Delete button appear)\n";
echo "  2. Click: Delete button\n";
echo "  3. Confirm: Click OK on the confirmation dialog\n";
echo "Expected: Task disappears from the list\n\n";

echo "TEST 4.7: Test Multiple Tasks\n";
echo "Steps:\n";
echo "  1. Add 5 more tasks\n";
echo "  2. Complete some (3-4 tasks)\n";
echo "  3. Leave some incomplete\n";
echo "Expected: All operations work smoothly\n\n";

echo "========================================\n";
echo "STEP 5: Test Multi-User Isolation\n";
echo "========================================\n";
echo "Steps:\n";
echo "  1. Open browser in Incognito/Private mode\n";
echo "  2. Register another account:\n";
echo "     - Email: test2@example.com\n";
echo "     - Password: password123\n";
echo "  3. Add tasks as User 2\n";
echo "  4. Logout\n";
echo "  5. Login as User 1 (test@example.com)\n";
echo "Expected: User 1 sees only their tasks, not User 2's tasks\n\n";

echo "========================================\n";
echo "STEP 6: Test Network Tab (Check AJAX calls)\n";
echo "========================================\n";
echo "Steps:\n";
echo "  1. Open Developer Tools (F12)\n";
echo "  2. Go to Network tab\n";
echo "  3. Add/Update/Delete a task\n";
echo "Expected: You see these API calls:\n";
echo "  - POST /api/tasks (for creating)\n";
echo "  - GET /api/tasks (for loading)\n";
echo "  - PATCH /api/tasks/{id}/toggle (for updating)\n";
echo "  - DELETE /api/tasks/{id} (for deleting)\n";
echo "  All should return status 200 (success)\n\n";

echo "========================================\n";
echo "STEP 7: Test Error Handling\n";
echo "========================================\n\n";

echo "TEST 7.1: Empty Task Title\n";
echo "Steps:\n";
echo "  1. Leave input empty\n";
echo "  2. Click Add button\n";
echo "Expected: Alert: 'Please enter a task title'\n\n";

echo "TEST 7.2: Very Long Title\n";
echo "Steps:\n";
echo "  1. Type 300+ characters\n";
echo "  2. Click Add button\n";
echo "Expected: Should fail with validation error\n\n";

echo "TEST 7.3: Logout and Try Access\n";
echo "Steps:\n";
echo "  1. Logout (click logout in navigation)\n";
echo "  2. Try to manually access /dashboard\n";
echo "Expected: Redirected to login page\n\n";

echo "========================================\n";
echo "STEP 8: Verify Data in Database\n";
echo "========================================\n";
echo "Run in terminal:\n";
echo "php artisan tinker\n";
echo ">>> Task::all();\n";
echo ">>> Task::where('user_id', 1)->get();\n";
echo "Expected: See all created tasks\n\n";

echo "========================================\n";
echo "If Everything Works:\n";
echo "========================================\n";
echo "✅ Database migrations\n";
echo "✅ User registration\n";
echo "✅ Task creation\n";
echo "✅ Task display\n";
echo "✅ Task toggling\n";
echo "✅ Task deletion\n";
echo "✅ User authentication\n";
echo "✅ Data isolation between users\n";
echo "✅ AJAX without page reload\n";
echo "✅ Error handling\n\n";

echo "========================================\n";
echo "Common Issues & Solutions:\n";
echo "========================================\n\n";

echo "Issue 1: Tasks don't load\n";
echo "Solution: \n";
echo "  - Check Console (F12) for JavaScript errors\n";
echo "  - Check Network tab for API errors\n";
echo "  - Make sure you're logged in\n\n";

echo "Issue 2: Tasks appear but can't interact\n";
echo "Solution:\n";
echo "  - Refresh the page (Ctrl+R)\n";
echo "  - Check browser console for errors\n";
echo "  - Clear browser cache\n\n";

echo "Issue 3: Authorization errors\n";
echo "Solution:\n";
echo "  - Make sure you're logged in\n";
echo "  - Check Network tab for 401/403 status\n";
echo "  - Login again\n\n";

echo "Issue 4: Tasks not persisting\n";
echo "Solution:\n";
echo "  - Run migrations: php artisan migrate\n";
echo "  - Check database: php artisan tinker\n";
echo "  - Check logs: storage/logs/laravel.log\n\n";

echo "========================================\n";
echo "Happy Testing!\n";
echo "========================================\n\n";
?>
